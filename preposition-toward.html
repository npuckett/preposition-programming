<!DOCTYPE html>
<html>
<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.min.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>    <div class="description">
        <h1>Preposition: TOWARD</h1>
        
        <p class="web-editor-link-container">
            <a href="https://editor.p5js.org/npuckett/sketches/H93wrfKL5" target="_blank" class="web-editor-link">
                Open this sketch in P5 Web Editor →
            </a>
        </p>
        
        <h3>Try It</h3>
        <p>Click anywhere in the canvas below. Watch as the yellow circle moves toward your click position, demonstrating directional movement.</p>
    </div>

    <div class="container">
        <div class="canvas-container">
            <div id="canvas"></div>
        </div>
    </div>

    <div class="description">
        <h3>Concept</h3>
        <p><strong>TOWARD</strong> means moving in the direction of something, approaching a target. This involves calculating direction vectors and moving an object closer to a destination over time.</p>
        
        <h3>Translation Strategy</h3>
        <p>To create "toward" relationships on screen:</p>
        <ul>
            <li><strong>Vector Calculation:</strong> Calculate the direction from current position to target</li>
            <li><strong>Gradual Movement:</strong> Move in small steps toward the target rather than jumping immediately</li>
            <li><strong>Distance Tracking:</strong> Monitor how close the object gets to its target</li>
        </ul>
        
        <h3>Key P5.js Methods</h3>
        <div class="code-section">
            <strong>Vector Mathematics:</strong><br>
            • Calculate direction: <code>dx = targetX - currentX</code>, <code>dy = targetY - currentY</code><br>
            • <a href="https://p5js.org/reference/p5/atan2" target="_blank">atan2(dy, dx)</a> - Calculate angle toward target<br>
            • <a href="https://p5js.org/reference/p5/cos" target="_blank">cos(angle)</a> and <a href="https://p5js.org/reference/p5/sin" target="_blank">sin(angle)</a> - Convert angle to movement<br><br>
            
            <strong>Distance and Movement:</strong><br>
            • <a href="https://p5js.org/reference/p5/dist" target="_blank">dist(x1, y1, x2, y2)</a> - Calculate distance to target<br>
            • <a href="https://p5js.org/reference/p5/lerp" target="_blank">lerp(start, stop, amount)</a> - Smooth movement toward target<br><br>
            
            <strong>Drawing Elements:</strong><br>
            • <a href="https://p5js.org/reference/p5/ellipse" target="_blank">ellipse(x, y, width, height)</a> - Draw moving objects<br>
            • <a href="https://p5js.org/reference/p5/line" target="_blank">line(x1, y1, x2, y2)</a> - Draw direction indicators<br>
            • <a href="https://p5js.org/reference/p5/arrow" target="_blank">Custom arrow drawing</a> - Show direction visually<br><br>
            
            <strong>Animation:</strong><br>
            • Update position each frame in <code>draw()</code> function<br>
            • Use speed variables to control movement rate<br><br>
            
            <strong>Mouse Interaction:</strong><br>
            • <a href="https://p5js.org/reference/p5/mousePressed" target="_blank">mousePressed()</a> - Set new target when mouse is clicked<br>
            • <a href="https://p5js.org/reference/p5/mouseX" target="_blank">mouseX</a> and <a href="https://p5js.org/reference/p5/mouseY" target="_blank">mouseY</a> - Get target coordinates
        </div>
        
        <h3>Code Structure</h3>
        <div class="code-section">
            <strong>Basic Pattern for "Toward":</strong><br><br>
            
            1. <strong>Define moving object and target:</strong> Set up initial positions<br>
            <code>let movingObject = {x: 100, y: 100, speed: 2};</code><br>
            <code>let target = {x: 300, y: 200};</code><br><br>
            
            2. <strong>Calculate direction:</strong> Find vector toward target<br>
            <code>let dx = target.x - movingObject.x;</code><br>
            <code>let dy = target.y - movingObject.y;</code><br>
            <code>let distance = dist(movingObject.x, movingObject.y, target.x, target.y);</code><br><br>
            
            3. <strong>Move toward target:</strong> Update position each frame<br>
            <code>if (distance > movingObject.speed) {</code><br>
            <code>&nbsp;&nbsp;let moveX = (dx / distance) * movingObject.speed;</code><br>
            <code>&nbsp;&nbsp;let moveY = (dy / distance) * movingObject.speed;</code><br>
            <code>&nbsp;&nbsp;movingObject.x += moveX;</code><br>
            <code>&nbsp;&nbsp;movingObject.y += moveY;</code><br>
            <code>}</code>
        </div>
    </div>

    <script>
        let movingCircle = { x: 100, y: 150, speed: 3, isMoving: false };
        let target = { x: 300, y: 150, visible: true };
        let trail = [];
        
        function setup() {
            createCanvas(400, 300).parent('canvas');
        }
        
        function draw() {
            background(240);
            
            // Calculate distance and direction to target
            let distance = dist(movingCircle.x, movingCircle.y, target.x, target.y);
            let dx = target.x - movingCircle.x;
            let dy = target.y - movingCircle.y;
            
            // Move toward target if far enough away
            if (distance > 5 && movingCircle.isMoving) {
                let moveX = (dx / distance) * movingCircle.speed;
                let moveY = (dy / distance) * movingCircle.speed;
                movingCircle.x += moveX;
                movingCircle.y += moveY;
                
                // Add to trail
                trail.push({x: movingCircle.x, y: movingCircle.y});
                if (trail.length > 50) {
                    trail.shift();
                }
            } else if (distance <= 5) {
                movingCircle.isMoving = false;
                target.visible = false;
            }
            
            // Draw trail
            stroke(255, 200, 0, 100);
            strokeWeight(2);
            noFill();
            if (trail.length > 1) {
                beginShape();
                for (let i = 0; i < trail.length; i++) {
                    vertex(trail[i].x, trail[i].y);
                }
                endShape();
            }
            
            // Draw direction line
            if (movingCircle.isMoving && distance > 5) {
                stroke(100, 200, 100, 150);
                strokeWeight(1);
                line(movingCircle.x, movingCircle.y, target.x, target.y);
                
                // Draw direction arrow
                drawArrow(movingCircle.x, movingCircle.y, target.x, target.y);
            }
            
            // Draw target
            if (target.visible) {
                fill(255, 100, 100, 150);
                stroke(255, 100, 100);
                strokeWeight(2);
                ellipse(target.x, target.y, 30, 30);
                
                // Target crosshairs
                stroke(255, 100, 100);
                strokeWeight(1);
                line(target.x - 15, target.y, target.x + 15, target.y);
                line(target.x, target.y - 15, target.x, target.y + 15);
            }
            
            // Draw moving circle
            fill(255, 200, 100);
            stroke(255, 150, 0);
            strokeWeight(2);
            ellipse(movingCircle.x, movingCircle.y, 25, 25);
            
            // Labels
            fill(0);
            noStroke();
            textAlign(CENTER);
            textSize(12);
            text("Moving Circle", movingCircle.x, movingCircle.y - 20);
            if (target.visible) {
                text("Target", target.x, target.y + 25);
            }
            
            // Determine relationship
            let relationship = "";
            if (movingCircle.isMoving) {
                relationship = "Circle is moving TOWARD the target";
            } else if (!target.visible) {
                relationship = "Circle has REACHED the target";
            } else {
                relationship = "Click to set a target";
            }
            
            // Draw measurement info
            textAlign(LEFT);
            textSize(10);
            text("Distance to target: " + Math.round(distance), 10, 20);
            text("Speed: " + movingCircle.speed + " pixels/frame", 10, 35);
            text("Moving: " + movingCircle.isMoving, 10, 50);
            
            // Reset button
            fill(200);
            stroke(100);
            strokeWeight(1);
            rect(10, 60, 60, 25);
            fill(0);
            noStroke();
            textAlign(CENTER);
            text("Reset", 40, 77);
            
            // Draw relationship text
            textAlign(CENTER);
            textSize(16);
            text(relationship, width/2, height - 40);
            text("Click anywhere to set a new target", width/2, height - 15);
        }
        
        function drawArrow(fromX, fromY, toX, toY) {
            let angle = atan2(toY - fromY, toX - fromX);
            let distance = dist(fromX, fromY, toX, toY);
            
            // Draw arrow head at 1/3 of the way to target
            let arrowX = fromX + cos(angle) * (distance * 0.3);
            let arrowY = fromY + sin(angle) * (distance * 0.3);
            
            stroke(100, 200, 100);
            strokeWeight(2);
            // Arrow head
            let arrowSize = 8;
            line(arrowX, arrowY, 
                 arrowX - cos(angle - 0.5) * arrowSize, 
                 arrowY - sin(angle - 0.5) * arrowSize);
            line(arrowX, arrowY, 
                 arrowX - cos(angle + 0.5) * arrowSize, 
                 arrowY - sin(angle + 0.5) * arrowSize);
        }
        
        function mousePressed() {
            // Check if reset button clicked
            if (mouseX > 10 && mouseX < 70 && mouseY > 60 && mouseY < 85) {
                movingCircle.x = 100;
                movingCircle.y = 150;
                movingCircle.isMoving = false;
                target.visible = false;
                trail = [];
                return;
            }
            
            // Set new target
            target.x = mouseX;
            target.y = mouseY;
            target.visible = true;
            movingCircle.isMoving = true;
            trail = [];
        }
    </script>
</body>
</html>
